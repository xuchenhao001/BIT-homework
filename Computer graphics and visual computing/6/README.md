# OpenGL太空垃圾收集游戏

需要OpenGL运行库和`glew`库

## 开发人员

王海鹏

徐晨浩

刘江涛

刘百宇

## 游戏过程

进入游戏是飞机的自由视角，能看见太空中从外太空漂浮来的垃圾，其中垃圾的大小和、位置和速度是不同的，自然吃掉每个垃圾时获得不同的分数。此时可以自由控制飞机朝向垃圾飞行，以分解吸收不同的垃圾。飞机有自己的收集范围，当垃圾进入飞机的收集范围之后，飞机自动和垃圾保持相对静止，同时飞机开启垃圾收集系统，将垃圾吸引并化为碎片之后吸收进入飞机，根据垃圾不同的大小和不同的速度获得不同的分数，当分数达到一定数值后飞机的最大速度和收集范围将会增大，提高飞机性能。

## 天空盒

天空盒其实就是一个覆盖场景四周的球体，面上贴有表示天空的纹理图片。

![](https://github.com/xuchenhao001/BIT-homework/blob/master/Computer%20graphics%20and%20visual%20computing/6/01.jpg)

## 垃圾类

为了实现太空垃圾，设计了一个垃圾类`CglGarbage`，其中包含对垃圾类的操作和管理。垃圾类负责提供垃圾初始化、绘制、移动、旋转等操作。

![](https://github.com/xuchenhao001/BIT-homework/blob/master/Computer%20graphics%20and%20visual%20computing/6/02.jpg)

## 飞机类

飞机模型共由飞机主翼，飞机尾部，飞机左右后尾翼以及腹翼，以及飞机主体组成。其中飞机主翼等机翼部分都由opengl的分格化多边形方法实现。

## 飞机尾焰

当绘制完飞机的机身时，同时绘制飞机尾焰，即粒子系统。通过调用`InitTail()`函数、`UpdateTail()`函数、`DrawTail()`函数等实现飞机尾焰的效果。其中`InitTail()`函数负责加载飞机纹理、初始化飞机尾焰的粒子，并负责管理粒子。`DrawTail()`函数负责绘制尾焰部分，需要设置混合等系统环境。`UpdateTail()`函数部分负责更新尾焰粒子，管理粒子的生命周期。

## 垃圾回收特效

当飞机靠近垃圾时调用垃圾特效，即粒子系统。通过调用`InitPatch()`函数，`UpdatePatch()`函数、`DrawPatch()`函数实现垃圾特效。其中`InitPatch()`函数负责加载碎片纹理、初始化碎片粒子，并负责管理粒子。`DrawPatch()`函数负责绘制碎片部分，需要设置混合等系统环境。`UpdatePatch()`函数部分负责更新碎片粒子，管理粒子的生命周期。

## `2D`、`3D`文字

通过调用动态链接库中的函数实现`2D`文字，用以显示当前的分数，飞机的速度，收集范围等内容。首先创建`Cstring`实例，传入需要打印出来的内容。之后创建`CglFont`实例，传入需要打印的内容以及对应的参数，即可打印出来相应的内容。

`3D`文字在飞机机身上绘制，在绘制飞机的时候在其上方绘制飞机名称，绘制方式和`2D`文字类似，只是调用的函数略有不同，传入的参数不同。

## 按键说明：

| 按键              | 说明                        |
| --------------- | ------------------------- |
| `F2`            | 变换视点模式，0为欧拉角试图，1为自由变换视角   |
| `space`         | 控制视点是否跟踪飞机，0为不跟踪飞机，1为跟踪飞机 |
| `,<`            | 飞船加速飞行                    |
| `.>`            | 飞船减速飞行                    |
| `↑`,`↓`,`←`,`→` | 控制飞机飞行向上下左右飞行             |
| `W`,`S`,`A`,`D` | 控制视点上下左右移动【跟踪飞机时失效】       |
| `Q`,`E`         | 控制视点向前向后移动【跟踪飞机时失效】       |
| `I`,`K`,`J`,`L` | 控制视点上下左右旋转【跟踪飞机时失效】       |
| `U`,`O`         | 控制视点左偏右偏旋转【跟踪飞机时失效】       |

## 程序设计说明

实现题目要求：
* 完成实现`Windows`下的动态链接库引擎。
* 视点类和控制类，可以进行跟随方式和自由方式
* 飞船速度、方向的运动控制
* 完成飞机后面尾迹设计，保证在速度变化以及视点变化情况下，尾迹仍然是飞机长度的`120`倍。且尾迹的最后`20%`为渐渐消失效果。
* 飞船绘制
* 飞船尾焰特效绘制
* 太空垃圾绘制
* 太空垃圾转化碎片特效绘制
* 所有可见对象的贴图
